- name: Setup docker
  hosts: master:managers:workers
  tasks:
  - name: Install HTTPS transport
    apt:
      name: apt-transport-https
      state: present

  - name: Import docker GPG key
    apt_key:
      url: https://download.docker.com/linux/debian/gpg
      state: present

  - name: Add docker repository
    apt_repository:
      repo: 'deb https://download.docker.com/linux/debian stretch stable'
      state: present

  - name: Install docker
    apt:
      name: docker-ce
      state: present

  - name: Install docker python
    pip:
      name: docker
      state: present